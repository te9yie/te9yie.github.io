<!DOCTYPE html><html><head><title>te9yie</title><meta charSet="utf-8"/><meta name="viewport" content="initial-scale=1.0, width=device-width"/><meta name="google-site-verification" content="iMWdKZ02K2Yzj9AtOP4cl-40F5DJp-YJLQDzv9vQgMk"/><link rel="alternate" type="application/rss+xml" href="/rss.xml" title="RSS"/><meta name="next-head-count" content="5"/><link rel="preload" href="/_next/static/css/b9d5dc7910600465cf92.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b9d5dc7910600465cf92.css" data-n-g=""/><link rel="preload" href="/_next/static/css/18a619bacb7468e88ab5.css" as="style"/><link rel="stylesheet" href="/_next/static/css/18a619bacb7468e88ab5.css" data-n-p=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-1f0b73d383aed819e4f2.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.29f9e2f3d4a33bafbaa5.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.3a16fc34825ffc7ba561.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-ade6e51b5c04250850ce.js" as="script"/><link rel="preload" href="/_next/static/chunks/5b8405c71ec72b7dd4866e6123c0d9567c2e887a.f4a35a052a5d77434417.js" as="script"/><link rel="preload" href="/_next/static/chunks/00cbe0eb025af1da8768e6eebd5e28fe8100b658.d21267665854b47491ea.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/index-d69a93234b2f3ebf0601.js" as="script"/></head><body><div id="__next"><header><nav><ul><li><a id="site-name" href="/"><h1>te9yie</h1></a></li><li><a href="/b">Blog</a></li><li><a href="/w">Wiki</a></li></ul><div class="search-box"><div class="gcse-searchbox-only"></div></div></nav></header><article><h2><a class="index_permalink__UOudO" href="/b/2021-03-03">2021-03-03</a></h2><p>検索機能をつけたい。Google 検索ができればよいと思い設定してみる。</p><p><a href="https://programmablesearchengine.google.com/">Programmable Search Engine</a></p><p>下記のコードをコピーして貼り付けてくれ、といわれたままやると <code>&lt;div&gt;</code> 自体が見えなくなってうまく動かなかった。</p><pre><code>&lt;script async src=&quot;https://cse.google.com/cse.js?cx=c961937a8b4f96e3d&quot;&gt;&lt;/script&gt;
&lt;div class=&quot;gcse-search&quot;&gt;&lt;/div&gt;</code></pre><p>まあ <a href="/w/React">React</a> だから <code>&lt;script&gt;</code> あたりの処理がうまく動かないのかなと思った。</p><p><code>useEffect</code> で対応してみた。</p><pre><code class="language-typescript">const SearchBox: React.FC = () =&gt; {
  const searchBoxRef = React.createRef&lt;HTMLDivElement&gt;();
  useEffect(() =&gt; {
    if (searchBoxRef &amp;&amp; searchBoxRef.current) {
      const searchBox = searchBoxRef.current;
      const parent = searchBox.parentNode;
      const gcse = document.createElement(&quot;script&quot;);
      gcse.async = true;
      gcse.src = &quot;https://cse.google.com/cse.js?cx=c961937a8b4f96e3d&quot;;
      parent?.insertBefore(gcse, searchBox);
    }
  });
  return (
    &lt;div className=&quot;search-box&quot;&gt;
      &lt;div ref={searchBoxRef} className=&quot;gcse-search&quot;&gt;&lt;/div&gt;
    &lt;/div&gt;
  );
};</code></pre><p>あと余白が大きくて邪魔だったので CSS も書いた。</p><pre><code class="language-css">.gsc-control-cse {
    padding: 0 !important;
}</code></pre></article><article><h2><a class="index_permalink__UOudO" href="/b/2021-03-02">2021-03-02</a></h2><p>引き続き <a href="/w/JavaScript">JavaScript</a> の勉強。</p><p><a href="https://jsprimer.net/basic/function-this/">関数とthis · JavaScript Primer #jsprimer</a> を読んだ。</p><p>アロー関数では <code>this</code> は静的スコープで解決され、それ以外の関数では暗黙の引数で <code>this</code> が渡されるようだ。<code>var</code> の変数の巻き上げ挙動も怖い。知らないと色々罠がありそうだ。</p><p><a href="/w/TypeScript">TypeScript</a> を学ぶにしても、基本の JavaScript の知識がないとダメなことが分かった。</p><hr/><p>開発環境として <a href="/w/Docker">Docker</a> を使ってみることにした。 <a href="/w/VS%20Code">VS Code</a> から簡単に扱えるようなので試している。</p><p><a href="https://code.visualstudio.com/docs/remote/containers">Developing inside a Container using Visual Studio Code Remote Development</a></p><p>Windows で <code>git clone</code> して Remote Container で開いたらファイルが軒並み変更がかかった。どうも改行コードらへんの扱いが怪しいらしい。と思ったら、そのものの解説があった。</p><p><a href="https://code.visualstudio.com/docs/remote/troubleshooting#_resolving-git-line-ending-issues-in-containers-resulting-in-many-modified-files">Visual Studio Code Remote Development Troubleshooting Tips and Tricks</a></p><p><code>.gitattributes</code> を追加することにした。</p><pre><code class="language-gitattributes">* text=auto eol=lf</code></pre><hr/><p>いや、Windows 上で <code>git clone</code> せずに <a href="/w/WSL">WSL</a> 上でやって、そこから Remove Container を使うと大丈夫だ。</p></article><article><h2><a class="index_permalink__UOudO" href="/b/2021-03-01">2021-03-01</a></h2><p><a href="/w/JavaScript">JavaScript</a> 難しい。</p><p><a href="https://ja.reactjs.org/docs/handling-events.html">Reactのイベント処理</a>:</p><blockquote><p>JSX のコールバックにおける this の意味に注意しなければなりません。JavaScript では、クラスのメソッドはデフォルトではバインドされません。this.handleClick へのバインドを忘れて onClick に渡した場合、実際に関数が呼ばれた時に this は undefined となってしまいます。</p></blockquote><p>意味が分からない。<a href="/w/JavaScript">JavaScript</a> では関数の定義方法が複数あって、それぞれ挙動が違うってことなんだと思う。</p><p><a href="https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Functions/Arrow_functions">アロー関数 - JavaScript | MDN</a> によると、メソッドでない関数はアロー関数式を使って定義したほうがよさそうだ。</p><p><a href="/w/TypeScript">TypeScript</a> の場合も、<a href="https://typescript-jp.gitbook.io/deep-dive/future-javascript/arrow-functions">アロー関数 - TypeScript Deep Dive 日本語版</a>を読む感じ、基本的にはアロー関数を使ったほうがよさそうな気がする。</p><p><code>this</code> のバインドあたりの理解は大変そうだ。</p><hr/><p>「ネスレ 香るまろやか ミルクココア」がおいしい。<code>&gt;&gt;</code><a href="/w/%E5%A5%BD%E3%81%8D%E3%81%AA%E3%82%82%E3%81%AE">好きなもの</a></p></article><footer>© <!-- -->2021<!-- --> <!-- -->te9yie</footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":[{"id":"2021-03-03","content":"検索機能をつけたい。Google 検索ができればよいと思い設定してみる。\n\n[Programmable Search Engine](https://programmablesearchengine.google.com/)\n\n下記のコードをコピーして貼り付けてくれ、といわれたままやると `\u003cdiv\u003e` 自体が見えなくなってうまく動かなかった。\n\n```\n\u003cscript async src=\"https://cse.google.com/cse.js?cx=c961937a8b4f96e3d\"\u003e\u003c/script\u003e\n\u003cdiv class=\"gcse-search\"\u003e\u003c/div\u003e\n```\n\nまあ [[React]] だから `\u003cscript\u003e` あたりの処理がうまく動かないのかなと思った。\n\n`useEffect` で対応してみた。\n\n```typescript\nconst SearchBox: React.FC = () =\u003e {\n  const searchBoxRef = React.createRef\u003cHTMLDivElement\u003e();\n  useEffect(() =\u003e {\n    if (searchBoxRef \u0026\u0026 searchBoxRef.current) {\n      const searchBox = searchBoxRef.current;\n      const parent = searchBox.parentNode;\n      const gcse = document.createElement(\"script\");\n      gcse.async = true;\n      gcse.src = \"https://cse.google.com/cse.js?cx=c961937a8b4f96e3d\";\n      parent?.insertBefore(gcse, searchBox);\n    }\n  });\n  return (\n    \u003cdiv className=\"search-box\"\u003e\n      \u003cdiv ref={searchBoxRef} className=\"gcse-search\"\u003e\u003c/div\u003e\n    \u003c/div\u003e\n  );\n};\n```\n\nあと余白が大きくて邪魔だったので CSS も書いた。\n\n```css\n.gsc-control-cse {\n    padding: 0 !important;\n}\n```\n"},{"id":"2021-03-02","content":"引き続き [[JavaScript]] の勉強。\n\n[関数とthis · JavaScript Primer #jsprimer](https://jsprimer.net/basic/function-this/) を読んだ。\n\nアロー関数では `this` は静的スコープで解決され、それ以外の関数では暗黙の引数で `this` が渡されるようだ。`var` の変数の巻き上げ挙動も怖い。知らないと色々罠がありそうだ。\n\n[[TypeScript]] を学ぶにしても、基本の JavaScript の知識がないとダメなことが分かった。\n\n---\n\n開発環境として [[Docker]] を使ってみることにした。 [[VS Code]] から簡単に扱えるようなので試している。\n\n[Developing inside a Container using Visual Studio Code Remote Development](https://code.visualstudio.com/docs/remote/containers)\n\nWindows で `git clone` して Remote Container で開いたらファイルが軒並み変更がかかった。どうも改行コードらへんの扱いが怪しいらしい。と思ったら、そのものの解説があった。\n\n[Visual Studio Code Remote Development Troubleshooting Tips and Tricks](https://code.visualstudio.com/docs/remote/troubleshooting#_resolving-git-line-ending-issues-in-containers-resulting-in-many-modified-files)\n\n`.gitattributes` を追加することにした。\n\n```gitattributes\n* text=auto eol=lf\n```\n\n---\n\nいや、Windows 上で `git clone` せずに [[WSL]] 上でやって、そこから Remove Container を使うと大丈夫だ。\n"},{"id":"2021-03-01","content":"[[JavaScript]] 難しい。\n\n[Reactのイベント処理](https://ja.reactjs.org/docs/handling-events.html):\n\n\u003e JSX のコールバックにおける this の意味に注意しなければなりません。JavaScript では、クラスのメソッドはデフォルトではバインドされません。this.handleClick へのバインドを忘れて onClick に渡した場合、実際に関数が呼ばれた時に this は undefined となってしまいます。\n\n意味が分からない。[[JavaScript]] では関数の定義方法が複数あって、それぞれ挙動が違うってことなんだと思う。\n\n[アロー関数 - JavaScript | MDN](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Functions/Arrow_functions) によると、メソッドでない関数はアロー関数式を使って定義したほうがよさそうだ。\n\n[[TypeScript]] の場合も、[アロー関数 - TypeScript Deep Dive 日本語版](https://typescript-jp.gitbook.io/deep-dive/future-javascript/arrow-functions)を読む感じ、基本的にはアロー関数を使ったほうがよさそうな気がする。\n\n`this` のバインドあたりの理解は大変そうだ。\n\n---\n\n「ネスレ 香るまろやか ミルクココア」がおいしい。`\u003e\u003e`[[好きなもの]]"}]},"__N_SSG":true},"page":"/","query":{},"buildId":"fAigJn-YN5L2cCe8w5j4K","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-feb8a7604fa7fce626b2.js"></script><script src="/_next/static/chunks/main-1f0b73d383aed819e4f2.js" async=""></script><script src="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" async=""></script><script src="/_next/static/chunks/framework.29f9e2f3d4a33bafbaa5.js" async=""></script><script src="/_next/static/chunks/commons.3a16fc34825ffc7ba561.js" async=""></script><script src="/_next/static/chunks/pages/_app-ade6e51b5c04250850ce.js" async=""></script><script src="/_next/static/chunks/5b8405c71ec72b7dd4866e6123c0d9567c2e887a.f4a35a052a5d77434417.js" async=""></script><script src="/_next/static/chunks/00cbe0eb025af1da8768e6eebd5e28fe8100b658.d21267665854b47491ea.js" async=""></script><script src="/_next/static/chunks/pages/index-d69a93234b2f3ebf0601.js" async=""></script><script src="/_next/static/fAigJn-YN5L2cCe8w5j4K/_buildManifest.js" async=""></script><script src="/_next/static/fAigJn-YN5L2cCe8w5j4K/_ssgManifest.js" async=""></script></body></html>