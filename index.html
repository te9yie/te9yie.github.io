<!DOCTYPE html><html><head><title>te9yie</title><meta charSet="utf-8"/><meta name="viewport" content="initial-scale=1.0, width=device-width"/><meta name="google-site-verification" content="iMWdKZ02K2Yzj9AtOP4cl-40F5DJp-YJLQDzv9vQgMk"/><link rel="alternate" type="application/rss+xml" href="/rss.xml" title="te9yie.github.io"/><meta name="next-head-count" content="5"/><link rel="preload" href="/_next/static/css/e1a2388fec44c848d4d6.css" as="style"/><link rel="stylesheet" href="/_next/static/css/e1a2388fec44c848d4d6.css" data-n-g=""/><link rel="preload" href="/_next/static/css/18a619bacb7468e88ab5.css" as="style"/><link rel="stylesheet" href="/_next/static/css/18a619bacb7468e88ab5.css" data-n-p=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-1f0b73d383aed819e4f2.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.29f9e2f3d4a33bafbaa5.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.3a16fc34825ffc7ba561.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-e64b3a98308a11579950.js" as="script"/><link rel="preload" href="/_next/static/chunks/7ac61503aba6d10b58e3c266d97d99b7b5b3721a.c1b518faff21babf1a9f.js" as="script"/><link rel="preload" href="/_next/static/chunks/5f8a2089eac11fe3b358516a6b612033195d4834.09c9bf1e9518111d6ffd.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/index-9b12f7e5ac7c7e4e6afc.js" as="script"/></head><body><div id="__next"><header><nav><ul><li><a id="site-name" href="/"><h1>te9yie</h1></a></li><li><a href="/b">Blog</a></li><li><a href="/w">Wiki</a></li><li><a href="/search">Search</a></li></ul></nav></header><article><h2><a class="index_permalink__UOudO" href="/b/2021-03-06">2021-03-06</a></h2><p>最近気になっていた言語が二つある。</p><p>一つは<a class="wiki-link" href="/w/TypeScript">TypeScript</a>、もう一つが<a class="wiki-link" href="/w/Rust">Rust</a>だ。</p><p><a class="wiki-link" href="/w/C++">C++</a>が一番長い期間触っていて好きな言語なんだけど、C++17あたりからの進化の方向性に違和感があってなんだかなあと思っている。逆に<a class="wiki-link" href="/w/C%E8%A8%80%E8%AA%9E">C言語</a>に戻ってみるか？と思ったりもしたんだけど、そんな折に、どうも<a class="wiki-link" href="/w/Rust">Rust</a>が良さそうという噂を聞いた。</p><p>まずは公式のドキュメントから読んでいく。</p><p><a href="https://doc.rust-jp.rs/book-ja/title-page.html">The Rust Programming Language 日本語版 - The Rust Programming Language 日本語版</a></p><p>言語やフレームワーク、ライブラリなんでもなんだけど、ドキュメントがしっかりしていると安心感がある。</p><hr/><p>とりあえず<a class="wiki-link" href="/w/VS%20Code%20Remote%20Development">VS Code Remote Development</a>で<a class="wiki-link" href="/w/Rust">Rust</a>の開発環境を整える。</p></article><article><h2><a class="index_permalink__UOudO" href="/b/2021-03-05">2021-03-05</a></h2><p>Wikiシステムの改良をしている。</p><ul><li>参照元リンクが自動的に表示されるようにしたい。</li><li>関係ありそうなリンクも自動的に表示されるとうれしい。</li></ul><p>ざっくり言うと<a href="https://scrapbox.io">Scrapbox</a>みたいにしたい。</p><p><a class="wiki-link" href="/w/SSG">SSG</a>でやりたいので、<a class="wiki-link" href="/w/Markdown">Markdown</a>で書かれたファイル群からリンク情報を生成しておくことにした。</p><pre><code class="language-json">[
    {
        id: &quot;ページ名&quot;,
        refLinks: [&quot;このページを参照しているページ名&quot;, ...],
        links: [&quot;このページから参照しているページ名&quot;, ...]
    },
    ...
]</code></pre><p>こんな感じの<a class="wiki-link" href="/w/JSON">JSON</a>を一旦作っておいて、<a class="wiki-link" href="/w/Next.js">Next.js</a>でのビルド時にこのファイルも参照しながらページを構築していく。</p><p>Wikiリンクは<code>[[</code>と<code>]]</code>で囲うと作られるんだけど、存在しないリンクもつくることができる。存在しているかどうかを考えながら囲うか囲うまいか迷うのが嫌なので、ページが存在していなかった場合は自動的に作られるようにした。</p><p>あいかわらず、スクリプトは<a class="wiki-link" href="/w/JavaScript">JavaScript</a>で書いた。</p></article><article><h2><a class="index_permalink__UOudO" href="/b/2021-03-04">2021-03-04</a></h2><p><a class="wiki-link" href="/w/RSS">RSS</a>をつけてみたい。</p><p><a class="wiki-link" href="/w/Next.js">Next.js</a>で<a class="wiki-link" href="/w/RSS">RSS</a>生成ができるのか調べていた。見つけた方法は2つ。</p><ol><li><code>getServerSideProps()</code>を使って<a class="wiki-link" href="/w/SSR">SSR</a>する。</li><li>ビルド時に別処理で<a class="wiki-link" href="/w/RSS">RSS</a>ファイルを生成する。</li></ol><p>1.の方はサーバの用意が大変そうなのでやりたくない。2.になるんだけど、すでに<a class="wiki-link" href="/w/Next.js">Next.js</a>で同じような処理をやっているので、なんとかまとめたいと思っているんだけど、思いつかない。</p><p><a class="wiki-link" href="/w/RSS">RSS</a>生成は<code>yarn export:rss</code>ってやると<code>./out/rss.xml</code>が出力される感じにしたい。できれば<a class="wiki-link" href="/w/TypeScript">TypeScript</a>で書きたいんだけど、コンパイルとかもろもろ面倒なので素の<a class="wiki-link" href="/w/JavaScript">JavaScript</a>で書くことにしてみる。それなら<code>node gen-rss.js</code>で済む。</p><pre><code class="language-package.json">&quot;scripts&quot;: {
  ...
  &quot;export:rss&quot;: &quot;node gen-rss.js&quot;,
  ...
},</code></pre><p>あとは<a class="wiki-link" href="/w/Next.js">Next.js</a>でもやったような、<a class="wiki-link" href="/w/Markdown">Markdown</a>ファイル群を<a class="wiki-link" href="/w/HTML">HTML</a>に変換して<a class="wiki-link" href="/w/RSS">RSS</a>ファイルを生成する――同じような処理を何度も書くの嫌だなあ。</p><p><a href="https://github.com/te9yie/te9yie.github.io/blob/main/gen-rss.js">https://github.com/te9yie/te9yie.github.io/blob/main/gen-rss.js</a></p><p><a href="https://ja.reactjs.org/docs/react-dom-server.html">ReactDOMServer</a>使ってComponentsを使い回せないかと思ったんだが、コンパイル後<code>.js</code>が散らばったり<code>tsconfig.json</code>をどこに置けば良いのか分からないやらで、今の自分の知識では厳しそうだった。</p><p>あとは<a class="wiki-link" href="/w/GitHub%20Actions">GitHub Actions</a>のワークフローに組み込んで完成。うまく動いているといいなあ。</p></article><footer>© <!-- -->2021<!-- --> <!-- -->te9yie</footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"data":[{"id":"2021-03-06","content":"最近気になっていた言語が二つある。\n\n一つは[[TypeScript]]、もう一つが[[Rust]]だ。\n\n[[C++]]が一番長い期間触っていて好きな言語なんだけど、C++17あたりからの進化の方向性に違和感があってなんだかなあと思っている。逆に[[C言語]]に戻ってみるか？と思ったりもしたんだけど、そんな折に、どうも[[Rust]]が良さそうという噂を聞いた。\n\nまずは公式のドキュメントから読んでいく。\n\n[The Rust Programming Language 日本語版 - The Rust Programming Language 日本語版](https://doc.rust-jp.rs/book-ja/title-page.html)\n\n言語やフレームワーク、ライブラリなんでもなんだけど、ドキュメントがしっかりしていると安心感がある。\n\n---\n\nとりあえず[[VS Code Remote Development]]で[[Rust]]の開発環境を整える。\n"},{"id":"2021-03-05","content":"Wikiシステムの改良をしている。\n\n- 参照元リンクが自動的に表示されるようにしたい。\n- 関係ありそうなリンクも自動的に表示されるとうれしい。\n\nざっくり言うと[Scrapbox](https://scrapbox.io)みたいにしたい。\n\n[[SSG]]でやりたいので、[[Markdown]]で書かれたファイル群からリンク情報を生成しておくことにした。\n\n```json\n[\n    {\n        id: \"ページ名\",\n        refLinks: [\"このページを参照しているページ名\", ...],\n        links: [\"このページから参照しているページ名\", ...]\n    },\n    ...\n]\n```\n\nこんな感じの[[JSON]]を一旦作っておいて、[[Next.js]]でのビルド時にこのファイルも参照しながらページを構築していく。\n\nWikiリンクは`[[`と`]]`で囲うと作られるんだけど、存在しないリンクもつくることができる。存在しているかどうかを考えながら囲うか囲うまいか迷うのが嫌なので、ページが存在していなかった場合は自動的に作られるようにした。\n\nあいかわらず、スクリプトは[[JavaScript]]で書いた。\n"},{"id":"2021-03-04","content":"[[RSS]]をつけてみたい。\n\n[[Next.js]]で[[RSS]]生成ができるのか調べていた。見つけた方法は2つ。\n\n1. `getServerSideProps()`を使って[[SSR]]する。\n2. ビルド時に別処理で[[RSS]]ファイルを生成する。\n\n1.の方はサーバの用意が大変そうなのでやりたくない。2.になるんだけど、すでに[[Next.js]]で同じような処理をやっているので、なんとかまとめたいと思っているんだけど、思いつかない。\n\n[[RSS]]生成は`yarn export:rss`ってやると`./out/rss.xml`が出力される感じにしたい。できれば[[TypeScript]]で書きたいんだけど、コンパイルとかもろもろ面倒なので素の[[JavaScript]]で書くことにしてみる。それなら`node gen-rss.js`で済む。\n\n```package.json\n\"scripts\": {\n  ...\n  \"export:rss\": \"node gen-rss.js\",\n  ...\n},\n```\n\nあとは[[Next.js]]でもやったような、[[Markdown]]ファイル群を[[HTML]]に変換して[[RSS]]ファイルを生成する――同じような処理を何度も書くの嫌だなあ。\n\nhttps://github.com/te9yie/te9yie.github.io/blob/main/gen-rss.js\n\n[ReactDOMServer](https://ja.reactjs.org/docs/react-dom-server.html)使ってComponentsを使い回せないかと思ったんだが、コンパイル後`.js`が散らばったり`tsconfig.json`をどこに置けば良いのか分からないやらで、今の自分の知識では厳しそうだった。\n\nあとは[[GitHub Actions]]のワークフローに組み込んで完成。うまく動いているといいなあ。\n"}]},"__N_SSG":true},"page":"/","query":{},"buildId":"92UZBB0tLyJw8Ne_jYNWD","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-4f4acd756cef4fe6da1b.js"></script><script src="/_next/static/chunks/main-1f0b73d383aed819e4f2.js" async=""></script><script src="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" async=""></script><script src="/_next/static/chunks/framework.29f9e2f3d4a33bafbaa5.js" async=""></script><script src="/_next/static/chunks/commons.3a16fc34825ffc7ba561.js" async=""></script><script src="/_next/static/chunks/pages/_app-e64b3a98308a11579950.js" async=""></script><script src="/_next/static/chunks/7ac61503aba6d10b58e3c266d97d99b7b5b3721a.c1b518faff21babf1a9f.js" async=""></script><script src="/_next/static/chunks/5f8a2089eac11fe3b358516a6b612033195d4834.09c9bf1e9518111d6ffd.js" async=""></script><script src="/_next/static/chunks/pages/index-9b12f7e5ac7c7e4e6afc.js" async=""></script><script src="/_next/static/92UZBB0tLyJw8Ne_jYNWD/_buildManifest.js" async=""></script><script src="/_next/static/92UZBB0tLyJw8Ne_jYNWD/_ssgManifest.js" async=""></script></body></html>